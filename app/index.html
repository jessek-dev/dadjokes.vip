<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dad Jokes - Daily Groan-Worthy Humor</title>
    <meta name="description" content="Get your daily dose of dad jokes! Premium dad humor delivered fresh every day. Available on iOS and Android.">

    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="/assets/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/assets/favicon-16x16.png" sizes="16x16" type="image/png">
    
    <!-- Manifest -->
    <link rel="manifest" href="/assets/site.webmanifest">
    
    <!-- Open Graph tags -->
    <meta property="og:title" content="Dad Jokes - Daily Groan-Worthy Humor">
    <meta property="og:description" content="Get your daily dose of dad jokes! Premium dad humor delivered fresh every day.">
    <meta property="og:image" content="https://dadjokes.vip/assets/og-image.png">
    <meta property="og:url" content="https://dadjokes.vip">

    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #FFA500 0%, #FFD700 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 40px 20px;
            text-align: center;
        }
        
        .logo {
            margin-bottom: 20px;
        }
        
        .logo-img {
            height: 80px;
            width: 80px;
            animation: bounce 2s infinite;
            border-radius: 6px; /* optional, adds soft corners */
        }

        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 8px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .tagline {
            font-size: 1.2em;
            color: rgba(255,255,255,0.9);
            margin-bottom: 30px;
        }
        
        .joke-card {
          background: white;
          border-radius: 20px;
          padding: 20px;
          margin: 30px 0;
          box-shadow: 0 10px 30px rgba(0,0,0,0.1);
          min-height: 220px;
          display: flex;
          justify-content: center;
          align-items: center;
          text-align: center;
          flex-direction: column;            
        }
        
        .joke-text {
            font-size: 1.6em;
            font-family: 'Special Elite', serif;
            color: #333;
            margin: 0;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .joke-text::after {
          content: '|';
          visibility: visible;
          animation: blink 1s steps(1) infinite;
          margin-left: 5px;
          color: #555;
          display: inline-block;
          width: 0.6ch; /* reserves space equal to a character */
        }

        @keyframes blink {
          0%, 100% { visibility: visible; }
          50% { visibility: hidden; }
        }

        .no-cursor::after {
          content: '';
          animation: none;
        }
        
        .features {
            display: grid;
            gap: 20px;
            margin: 40px 0;
        }
        
        .feature {
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .feature-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        
        .feature h3 {
            color: #FF8C00;
            margin-bottom: 10px;
        }
        
        .cta {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .store-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            margin-top: 20px;
        }
        
        .store-button {
            display: inline-flex;
            align-items: center;
            padding: 15px 30px;
            background: #333;
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-size: 1.1em;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 250px;
            justify-content: center;
            gap: 10px;
        }
        
        .store-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .cta-subtext {
          font-size: 1.1rem;
          margin: 10px 0 25px;
          color: #333;
        }
        
        .store-buttons-badges {
          display: flex;
          justify-content: center;
          gap: 20px;
          flex-wrap: wrap;
          margin-bottom: 30px;
        }
        
        .store-badge {
          height: 50px;
        }
        
        .screenshot-placeholder {
          background-color: #f9f9f9;
          padding: 30px;
          border-radius: 10px;
          border: 2px dashed #ccc;
          color: #777;
          font-style: italic;
          max-width: 600px;
          margin: 0 auto;
          text-align: center;
        }

        
        .coming-soon {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
        }
        
        .site-footer {
          width: 100%;
          background: #eee;
          text-align: center;
          padding: 40px 20px;
          margin-top: 60px;
        }
        
        .site-footer a {
          color: #FF8C00;
          text-decoration: none;
          margin: 0 15px;
          font-weight: 500;
        }
        
        .site-footer a:hover {
          opacity: 1;
        }

        .site-footer .footer-links {
          margin-bottom: 20px;
        }
        
        .site-footer .footer-stores {
          margin-bottom: 20px;
        }
        
        .site-footer .footer-stores img {
          height: 40px;
          margin: 0 10px;
        }
        
        .site-footer .footer-copy {
          font-size: 0.9em;
          color: #666;
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 2em;
            }
            
            .joke-text {
                font-size: 1.1em;
            }
            
            .store-button {
                width: 100%;
                max-width: 250px;
            }
        }

        .share-btn {
          position: absolute;
          bottom: 20px;
          right: 20px;
          background: none;
          border: none;
          cursor: pointer;
          padding: 4px;
        }
        
        .share-btn img {
          height: 24px;
          width: 24px;
          opacity: 0.6;
          transition: opacity 0.2s;
        }
        
        .share-btn:hover img {
          opacity: 1;
        }
        
        .joke-card {
          position: relative; /* required for absolute positioning inside */
        }

        .install-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(255, 255, 255, 0.95);
          border-radius: 20px;
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 2;
          text-align: center;
          padding: 20px;
        }

        
        .install-overlay.hidden {
          display: none;
        }
        
        .install-message {
          text-align: center;
          color: #333;
        }
        
        .install-message p {
          font-size: 1.2em;
          margin-bottom: 10px;
        }
       
        .install-message p:last-of-type {
          margin-bottom: 25px; /* or more/less as desired */
        }


    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
          <img src="/assets/android-chrome-192x192.png" alt="Dad Jokes Logo" class="logo-img">
        </div>
        <h1>Best Dad Jokes</h1>
        <p class="tagline">Your Daily Dose of Damn Good Jokes</p>
        
        <div class="joke-card">
          <p class="joke-text"></p>
          <button id="share-joke" class="share-btn">
            <img src="https://raw.githubusercontent.com/feathericons/feather/master/icons/share.svg" alt="Share">
          </button>
            
            <div id="install-overlay" class="install-overlay hidden">
              <div class="install-message">
                <p>Want more sweet dad jokes?</p>
                <p><strong>Install our app to unlock limitless laughs!</strong></p>
                <div class="store-buttons-badges">
                  <a href="https://dadjokes.vip/ios" class="appstore-link">
                      <img class="store-badge" src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on the App Store">
                    </a>
                    
                    <a href="https://dadjokes.vip/android" class="playstore-link">
                      <img class="store-badge" src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Get it on Google Play">
                    </a>
                </div>
              </div>
            </div>
              <div id="snarky-message" style="display:none; text-align: center;">
                  <p style="font-family: 'Special Elite', monospace; font-size: 1.5rem; margin-bottom: 10px;">
                    Even clever people have to download the app.
                  </p>
                  <p style="font-size: 1rem;">
                    <a href="/ios" class="appstore-link">iPhone</a> or <a href="/android" class="playstore-link">Android</a>
                  </p>
                </div>

        </div>

        
        
        <div class="features">
            <div class="feature">
                <div class="feature-icon">üéØ</div>
                <h3>Daily Featured Joke</h3>
                <p>Get a hand-picked 5-star dad joke every single day</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">üìö</div>
                <h3>Categorized Collection</h3>
                <p>Browse jokes by category - find the perfect groan for any occasion</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">‚≠ê</div>
                <h3>Rate & Save</h3>
                <p>Rate jokes and build your personal collection of favorites</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">üéâ</div>
                <h3>Premium Features</h3>
                <p>Get 10 daily refreshes, exclusive jokes, and an ad-free experience</p>
            </div>
        </div>
        
        <div class="cta">
          <h2>Ready to Groan?</h2>
          <p class="cta-subtext">
            The best dad jokes, groan-worthy puns, and eye-rolls ‚Äî all in one app.
            Available on iPhone and Android. Totally free.
          </p>
        
          <div class="store-buttons-badges">
            <a href="https://dadjokes.vip/ios" class="appstore-link">
              <img class="store-badge" src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on the App Store">
            </a>
            
            <a href="https://dadjokes.vip/android" class="playstore-link">
              <img class="store-badge" src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Get it on Google Play">
            </a>

          </div>
        
          <!-- Placeholder for screenshots -->
          <div class="screenshot-placeholder">
            <p>[ Screenshots Coming Soon ]</p>
          </div>
        </div>
    </div>
        
    <footer class="site-footer">
      <div class="footer-links">
        <a href="/app">App</a>
        <a href="/support">Support</a>
        <a href="/privacy">Privacy & Terms</a>
      </div>
    
      <div class="footer-stores">
        <a href="https://dadjokes.vip/ios" class="appstore-link">
          <img class="store-badge" src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on the App Store">
        </a>
        
        <a href="https://dadjokes.vip/android" class="playstore-link">
          <img class="store-badge" src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Get it on Google Play">
        </a>
      </div>
    
      <div class="footer-copy">
        ¬© <span id="year"></span> Dad Jokes. All rights reserved.
      </div>

    </footer>
    
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>

    
<!-- Firebase Featured Joke Loader -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBXlF5rNZJk42zLA7A-A7N9QcuqOmECzUk",
    authDomain: "dad-jokes-76c85.firebaseapp.com",
    projectId: "dad-jokes-76c85",
    storageBucket: "dad-jokes-76c85.firebasestorage.app",
    messagingSenderId: "165634926020",
    appId: "1:165634926020:web:3f8ad9f397da9c3574f091",
    measurementId: "G-7DJD06WV2R"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function loadRandomFeaturedJoke() {
    try {
      const jokesRef = collection(db, "jokes", "all", "jokes");
      const q = query(jokesRef, where("rating", "==", 5));
      const snapshot = await getDocs(q);
      const jokes = snapshot.docs.map(doc => doc.data().text);

      if (jokes.length === 0) {
        console.warn("No jokes found with rating 5.");
        return;
      }

      let randomJoke;
      const lastJoke = localStorage.getItem("lastJoke");
    
      do {
        randomJoke = jokes[Math.floor(Math.random() * jokes.length)];
      } while (randomJoke === lastJoke && jokes.length > 1);
    
      localStorage.setItem("lastJoke", randomJoke);

        let jokeViews = parseInt(localStorage.getItem("jokeViews") || "0");
        jokeViews++;
        localStorage.setItem("jokeViews", jokeViews);
        
        const overlay = document.getElementById("install-overlay");
        if (jokeViews >= 3 && overlay) {
          overlay.classList.remove("hidden");
        }



      const jokeCard = document.querySelector(".joke-card");
      if (jokeCard) {
        const p = jokeCard.querySelector(".joke-text");
        p.textContent = "";
        p.className = "joke-text";
        jokeCard.appendChild(p);
        
        let i = 0;
        const speed = 50; // milliseconds between letters
        
        function typeWriter() {
          if (i < randomJoke.length) {
            const char = randomJoke.charAt(i);
            p.textContent += char;
            i++;
        
            const prev2 = randomJoke.charAt(i - 2);
            const prev3 = randomJoke.charAt(i - 3);
            const prev4 = randomJoke.charAt(i - 4);
        
            // Primary pause after "? " or "... "
            if (
              char === ' ' &&
              !typeWriter.hasPaused &&
              (
                prev2 === '?' || // question
                (prev4 === '.' && prev3 === '.' && prev2 === '.') // ellipsis
              )
            ) {
              typeWriter.hasPaused = true;
              setTimeout(typeWriter, 2000);
              return;
            }
        
            // Smarter backup pause: pause before final sentence
            if (
              !typeWriter.hasPaused &&
              i >= 2 &&
              randomJoke.charAt(i - 1) === '.' &&
              randomJoke.charAt(i) === ' '
            ) {
              const remaining = randomJoke.slice(i + 1);
              const nextWordMatch = remaining.match(/^[A-Z][^.?!]*[.?!]/); // find next sentence
              const remainingAfterNextSentence = remaining.slice(nextWordMatch?.[0]?.length || 0);
            
              // If there are no more full sentences after this one, pause before the punchline
              if (!/[.?!]/.test(remainingAfterNextSentence)) {
                typeWriter.hasPaused = true;
                setTimeout(typeWriter, 2000);
                return;
              }
            }


        
            setTimeout(typeWriter, speed);
          } else {
            p.classList.remove("joke-text");
            p.classList.add("joke-text", "no-cursor");
            const shareBtn = document.getElementById("share-joke");
            if (shareBtn) {
              shareBtn.style.display = "inline-block";
              if (navigator.share) {
                shareBtn.onclick = () => {
                  navigator.share({
                    title: "Dad Joke of the Day",
                    text: randomJoke,
                    url: "https://dadjokes.vip/app"
                  }).catch((err) => {
                    console.error("Share failed:", err);
                  });
                };
              }
            }
          }
        }
        typeWriter.hasPaused = false; // flag to only pause once
        
        typeWriter();

      }
    } catch (error) {
      console.error("Error loading joke:", error);
    }
  }

  window.addEventListener("DOMContentLoaded", loadRandomFeaturedJoke);
</script>

<script>
  document.querySelectorAll(".appstore-link").forEach(el => {
    el.href = "https://dadjokes.vip/ios";
  });

  document.querySelectorAll(".playstore-link").forEach(el => {
    el.href = "https://dadjokes.vip/android";
  });
</script>

<script>
  const jokeCardObserver = new MutationObserver(() => {
    const overlay = document.getElementById("install-overlay");
    const snarky = document.getElementById("snarky-message");

    if (!overlay || overlay.classList.contains("hidden")) return;

    const isOverlayPresent = document.body.contains(overlay);
    if (!isOverlayPresent) {
      snarky.style.display = "block";
    }
  });

  const jokeCard = document.querySelector(".joke-card");
  if (jokeCard) {
    jokeCardObserver.observe(jokeCard, { childList: true, subtree: true });
  }
</script>

<script>
  const observer = new MutationObserver(() => {
    const overlay = document.getElementById('install-overlay');
    const snarky = document.getElementById('snarky-message');
    const jokeText = document.querySelector('.joke-text');
    const shareBtn = document.getElementById('share-joke');

    if (!overlay && snarky && jokeText) {
      snarky.style.display = 'block';
      jokeText.innerHTML = '';
      if (shareBtn) shareBtn.style.display = 'none';
    }
  });

  observer.observe(document.querySelector('.joke-card'), {
    childList: true,
    subtree: true
  });
</script>

    
</body>
</html>
